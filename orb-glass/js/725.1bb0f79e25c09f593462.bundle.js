"use strict";(self.webpackChunkorb_study=self.webpackChunkorb_study||[]).push([[725],{1725:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ne}});var r=t(5861),i=t(5671),o=t(3144),a=t(7757),s=t.n(a),c=t(9340),l=t(6215),u=t(1120),v=t(2212);var h=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){var e;return(0,i.Z)(this,a),(e=r.call(this,{canvas:document.getElementById("experience"),antialias:!1,powerPreference:"high-performance"})).DPI=Math.min(2,window.devicePixelRatio),e.setPixelRatio(e.DPI),e.setSize(window.innerWidth,window.innerHeight),e}return(0,o.Z)(a,null,[{key:"getInstance",value:function(){return a.instance||(a.instance=new this),a.instance}}]),a}(v.WebGLRenderer),f=t(1752);var d=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){return(0,i.Z)(this,a),r.call(this)}return(0,o.Z)(a,null,[{key:"getInstance",value:function(){return a.instance||(a.instance=new this),a.instance}}]),a}(v.Scene),p=t(2886),m=(t(5449),function(e){var n=window.location.search,t=new URLSearchParams(n),r=t.has(e);return t.has("debug")&&r}),g=function(e,n){return new Promise((function(t){n.load(e,(function(e){return t(e)}))}))},y=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.msMaxTouchPoints||!1},w=m("debug"),x=m("fps"),b=m("drawcount"),S=(m("gui"),m("controls")),R={USE_POSTPROCESS:!0,DEBUG_FPS:w&&x,DEBUG_DRAW_COUNT:w&&b,USE_ORBIT_CONTROLS:w&&S,USE_GUI:!0,USE_XR:"undefined"!=typeof XR},P=t(3466),k="glResizeTopic",_="glUpdateTopic",E="glTouchMoveTopic",D="glTouchEndTopic",L="glTouchStartTopic",T=t(211),U=t(6008),Z=t(5709),C=new T.xQ,M=function(e,n){C.next({topic:e,data:n})},F=function(e,n){C.pipe((0,U.h)((function(n){return n.topic===e})),(0,Z.U)((function(e){return e.data}))).subscribe(n)},B=t(840),W=t.n(B),A=function(){function e(){(0,i.Z)(this,e),this._createListeners()}return(0,o.Z)(e,[{key:"_createListeners",value:function(){var e=this;if(window.addEventListener("resize",this.onResize.bind(this)),y()){window.addEventListener("touchstart",this.onTouch.bind(this)),window.addEventListener("touchend",this.onTouchEnd.bind(this)),window.addEventListener("touchmove",this.onMouseMove.bind(this));var n=new(W().Manager)(document.body),t=new(W().Pinch),r=new(W().Press),i=new(W().Tap),o=new(W().Pan);o.set({direction:W().DIRECTION_VERTICAL,threshold:1,velocity:.1}),n.add([t,r,o,i]),n.on("tap",(function(n){var t={normalized:{x:n.center.x/e.width*2-1,y:-n.center.y/e.height*2+1},raw:{x:n.center.x,y:n.center.y},rawNormalized:{x:2*(n.center.x-.5*e.width),y:2*(n.center.y-.5*e.height)}};M("glTapTopic",t)})),n.on("pinch",(function(e){M("glPinchTopic",e)})),n.on("press",(function(e){M("glLongPressTopic",e)})),n.on("pressup",(function(e){M("glLongPressTopicUp",e)})),n.on("panmove",(function(e){M("glPanTopic",e)})),n.on("pandown panup panend",(function(e){var n=!1;"panend"===e.type&&(e.velocityY<-.3&&e.distance>10&&(n=!0,e.angle<-60&&e.angle>-120&&M("glSwipeUpTopic",e)),e.velocityY>.3&&e.distance>10&&(n=!0,e.angle>60&&e.angle<120&&M("glSwipeDownTopic",e)),n||M("glPanEndTopic",e))}))}else window.addEventListener("mousedown",this.onTouch.bind(this)),window.addEventListener("mouseup",this.onTouchEnd.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("wheel",this.onWheel.bind(this))}},{key:"removeListeners",value:function(){y()?(window.removeEventListener("touchstart",this.onPress.bind(this)),window.removeEventListener("touchend",this.onPress.bind(this)),window.removeEventListener("touchmove",this.onPressMove.bind(this))):(window.removeEventListener("mousedown",this.onPress.bind(this)),window.removeEventListener("mouseup",this.onPress.bind(this)),window.removeEventListener("mousemove",this.onPressMove.bind(this)),window.removeEventListener("wheel",this.onWheel.bind(this))),window.removeEventListener("resize",this.onResize.bind(this))}},{key:"onTouch",value:function(e){this.mouse=this.getMouse(e),M(L,this.mouse)}},{key:"onTouchEnd",value:function(e){this.mouse=this.getMouse(e),M(D,this.mouse)}},{key:"onWheel",value:function(e){M("glWheelTopic",{deltaY:e.deltaY,deltaX:e.deltaX,direction:Math.sign(e.deltaY)})}},{key:"onResize",value:function(){M(k)}},{key:"onMouseMove",value:function(e){e.touches&&e.touches.length>1||(e.preventDefault(),e.stopPropagation(),this.mouse=this.getMouse(e),M(E,this.mouse))}},{key:"getMouse",value:function(e){return e.changedTouches&&(e=e.changedTouches[0]),{normalized:{x:e.clientX/this.width*2-1,y:-e.clientY/this.height*2+1},raw:{x:e.clientX,y:e.clientY},rawNormalized:{x:2*(e.clientX-.5*this.width),y:2*(e.clientY-.5*this.height)}}}}]),e}(),z=t(5108);var G=R.DEBUG_FPS,N=R.USE_ORBIT_CONTROLS,I=R.DEBUG_DRAW_COUNT,O=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){var e;return(0,i.Z)(this,a),(e=r.call(this)).clock=new v.Clock,e.isRunning=!1,e.requestFrame=null,e.elapsed=null,e.mouse={},e.width=window.innerWidth,e.height=window.innerHeight,e.mediator=pe.getInstance(),e.camera=e.mediator.camera,e.renderer=h.getInstance(),e.canvas=e.renderer.domElement,G&&(e.stats=new P,e.stats.showPanel(0),document.body.appendChild(e.stats.dom)),N&&(e.controls=null,e.initControls(),document.getElementById("ui").style.pointerEvents="none"),I&&(e.drawCallCount=0,e.renderer.info.autoReset=!1),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.start():e.pause()})),e}return(0,o.Z)(a,[{key:"start",value:function(){this.clock.start(),this.isRunning=!0,this.run()}},{key:"initControls",value:function(){this.controls=new p.z(this.camera,this.renderer.domElement),this.controls.enabled=!0,this.controls.enableDamping=!0,this.controls.dampingFactor=.08,this.controls.enablePan=!0,this.controls.update()}},{key:"pause",value:function(){this.clock.stop(),this.requestFrame&&(cancelAnimationFrame(this.requestFrame),this.requestFrame=null),this.isRunning=!1}},{key:"earlyUpdate",value:function(e,n){M("glEarlyUpdateTopic",{elapsed:e,delta:n})}},{key:"update",value:function(e,n){M(_,{elapsed:e,delta:n})}},{key:"lateUpdate",value:function(e,n){M("glLateUpdateTopic",{elapsed:e,delta:n})}},{key:"run",value:function(){var e=R.DEBUG_FPS;this.controls&&this.controls.update();var n=this.clock.getDelta();if(this.elapsed=this.clock.getElapsedTime(),e&&this.stats.begin(),this.earlyUpdate(this.elapsed,n),this.update(this.elapsed,n),this.lateUpdate(this.elapsed,n),e&&this.stats.end(),I){var t=this.renderer.info.render.calls;this.drawCallCount!=t&&z.log("Draw call count: ",t),this.drawCallCount=t,this.renderer.info.reset()}this.isRunning&&(this.requestFrame=requestAnimationFrame(this.run.bind(this)))}}]),a}(A),V=t(885);var j=function(e){(0,c.Z)(o,e);var n,t,r=(n=o,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function o(){var e;return(0,i.Z)(this,o),(e=r.call(this)).setIndex([2,1,0]),e.setAttribute("position",new v.Float32BufferAttribute([-1,-1,0,-1,4,0,4,-1,0],3)),e.needsUpdate=!0,e}return o}(v.BufferGeometry),q="#define GLSLIFY 1\n#include <packing>\n\nuniform sampler2D \tmapDiffuse;\nuniform vec2 \t\tresolution;\nvarying vec2 \t\tvUv;\n\nuniform float stepValue;\nuniform float passNo;\nuniform vec2 streakDirection;\n\nuniform float cameraNear;\nuniform float cameraFar;\n\n//#define STREAKS\n\nvec3 kawaseBlur ( sampler2D source, vec2 uv, float iteration, vec2 resolution, float brightness) {\n    vec2 step1 = ( vec2( iteration ) + 0.5 ) / resolution;\n\n    vec4 color = vec4(0.);\n\n    color += texture2D(mapDiffuse, uv + ( step1 ) ) / float(4);\n    color += texture2D(mapDiffuse,  uv - ( step1 ) ) / float(4);\n\n    vec2 step2 = step1;\n\n    step2.x = -step2.x;\n\n    color += texture2D(mapDiffuse, uv + ( step2 ) ) / float(4);\n    color += texture2D(mapDiffuse,  uv -  ( step2 ) ) / float(4);\n\n    return color.rgb;\n\n}\n\nvec3 kawaseStreaks (\n    sampler2D source,\n    vec2 uv,\n    float iteration,\n    vec2 resolution,\n    vec2 streakDirection,\n    const int streakSamples,\n    float attenuation\n    ) {\n\n    vec2 texCoordSample = vec2( 0.0 );\n    vec3 cOut           = vec3( 0.0 );\n\n    const int samples = 4;\n\n    float b = pow( float( samples ), iteration );//\n\n    vec2 pixelSize = vec2( 1.0 ) / resolution;\n\n    for (int s = 0; s < samples; s++) {\n\n        // Weight = a ^ ( b * s )\n        float weight = pow(attenuation, b * float( s ));\n\n        texCoordSample = uv + ( streakDirection * b * vec2( float( s ), float( s ) ) * pixelSize );\n        // Scale and accumulate\n        cOut += vec3( clamp( weight, 0.0, 1.0 ) ) * texture2D( source, texCoordSample ).rgb;\n\n    }\n\n    return cOut;\n\n}\n\nvoid main() {\n\n\t  vec4 diffuse = texture2D(mapDiffuse, vUv);\n    vec2 uv = vUv;\n    vec2 res = resolution.xy;\n\n    float i = stepValue;\n\n    float brightness = dot(diffuse.rgb, vec3(0.2126, 0.7152, 0.0722));\n\n    brightness = step( 0.1, brightness );\n\n    brightness = min( 0.75, brightness );\n\n    #ifdef STREAKS\n\n        vec3 color = kawaseStreaks( mapDiffuse, uv, stepValue, res, streakDirection, 1, 0.95 );\n\n    #else\n\n        vec3 color = kawaseBlur( mapDiffuse, uv, i, res, brightness );\n\n    #endif\n\n    gl_FragColor = vec4( color, 1.0 );\n\n}",X="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n    \n}",H=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.kernels,r=n.resolution,o=n.additive,a=void 0!==o&&o;(0,i.Z)(this,e),this.shader=new v.ShaderMaterial({vertexShader:X,fragmentShader:q,uniforms:{mapDiffuse:{value:null},flip:{value:!1},stepValue:{value:0},passNo:{value:0},streakDirection:{value:new v.Vector2(0,0)},resolution:{value:new v.Vector2(window.innerWidth,window.innerHeight)}},depthTest:!1,depthWrite:!1,blending:a?v.AdditiveBlending:v.NormalBlending}),this.screen=new v.Mesh(new j,this.shader),this.screen.frustumCulled=!1,this._allowSkipFrame=!0,this.skipFrame=!1,this.postScene=new v.Scene,this.postScene.autoUpdate=!1,this.postScene.add(this.screen),this.resolution=r||.25,this.target=new v.WebGLRenderTarget(1,1,{minFilter:v.LinearFilter,magFilter:v.LinearFilter,stencilBuffer:!1,format:v.RGBFormat}),this.target.texture.flipY=!0,this.fbo2=new v.WebGLRenderTarget(1,1,{minFilter:v.LinearFilter,magFilter:v.LinearFilter,stencilBuffer:!1,format:v.RGBFormat}),this.fbo2.texture.flipY=!0,this.kernels=t||[.25,.5,1,1.25],this.streakDirectons=[new v.Vector2(-1,0),new v.Vector2(1,0),new v.Vector2(0,-1),new v.Vector2(0,1)]}return(0,o.Z)(e,[{key:"skipFrames",get:function(){return this._allowSkipFrame},set:function(e){this._allowSkipFrame=e}},{key:"render",value:function(e,n,t,r){if(this.shader.uniforms.mapDiffuse.value=t,this.passNo=0,!this.skipFrame){for(var i=0;i<this.kernels.length;i++){e.setRenderTarget(this.fbo2),this.shader.uniforms.mapDiffuse.value=0===i?t:this.target.texture,this.shader.uniforms.stepValue.value=this.kernels[i],e.render(this.postScene,n),e.setRenderTarget(null);var o=this.target;this.target=this.fbo2,this.fbo2=o}r||e.setRenderTarget(this.target),e.render(this.postScene,n),e.setRenderTarget(null)}this._allowSkipFrame&&(this.skipFrame=!this.skipFrame)}},{key:"resize",value:function(e,n){this.target.setSize(e*this.resolution,n*this.resolution),this.fbo2.setSize(e*this.resolution,n*this.resolution),this.shader.uniforms.resolution.value=new v.Vector2(e*this.resolution,n*this.resolution)}}]),e}(),Y="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D mapDiffuse;\n\nvoid main() {\n\n    vec2 st = vUv;\n\n    vec3 diffuse = texture2D( mapDiffuse, vUv ).rgb;\n\n    gl_FragColor.rgb = diffuse;\n\n    gl_FragColor.a = 1.0;\n\n}",K="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n    \n}",J=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.sampleCount,r=void 0===t?4:t,o=n.isWebGL2,a=void 0!==o&&o;(0,i.Z)(this,e),a?(this.target=new v.WebGLMultisampleRenderTarget(1,1,{format:v.RGBFormat}),this.target.samples=r):this.target=new v.WebGLRenderTarget(1,1,{minFilter:v.LinearFilter,magFilter:v.LinearFilter,stencilBuffer:!1,format:v.RGBFormat}),this.shader=new v.ShaderMaterial({vertexShader:K,fragmentShader:Y,uniforms:{mapDiffuse:{value:this.target}},depthTest:!1,depthWrite:!1}),this.resolution=1,this.screen=new v.Mesh(new j,this.shader),this.screen.frustumCulled=!1,this.postScene=new v.Scene,this.postScene.autoUpdate=!1,this.postScene.add(this.screen)}return(0,o.Z)(e,[{key:"resize",value:function(e,n){this.target.setSize(e*this.resolution,n*this.resolution)}},{key:"render",value:function(e,n,t,r){e.setRenderTarget(this.target),e.render(n,t),e.setRenderTarget(null),r&&e.render(this.postScene,t)}}]),e}(),Q=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.shader,r=n.isWebGL2,o=void 0!==r&&r,a=n.sampleCount,s=void 0===a?1:a;(0,i.Z)(this,e),o?(this.target=new v.WebGLMultisampleRenderTarget(1,1,{minFilter:v.LinearFilter,magFilter:v.LinearFilter,stencilBuffer:!1,format:v.RGBFormat}),this.target.samples=s):this.target=new v.WebGLRenderTarget(1,1,{minFilter:v.LinearFilter,magFilter:v.LinearFilter,stencilBuffer:!1,format:v.RGBFormat}),this.shader=t,this.screen=new v.Mesh(new j,this.shader),this.screen.frustumCulled=!1,this.postScene=new v.Scene,this.postScene.autoUpdate=!1,this.postScene.add(this.screen)}return(0,o.Z)(e,[{key:"render",value:function(e,n,t,r){this.shader.uniforms.mapDiffuse.value=t,r||e.setRenderTarget(this.target),e.render(this.postScene,n),e.setRenderTarget(null)}},{key:"resize",value:function(e,n){this.target.setSize(e,n)}}]),e}();var $=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){(0,i.Z)(this,a);var e={mapDiffuse:{value:null},tLUT:{value:null},tLUTNeutral:{value:null},vignetteRadius:{value:.7},vignetteSmoothness:{value:.3},mapBlurScreen:{value:null},blurAmount:{value:0},mapRipple:{value:null},glowIntensity:{value:1},resolution:{value:new v.Vector2(window.innerWidth,window.innerHeight)}};return r.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n    \n}",fragmentShader:"#define GLSLIFY 1\n#include <common>\n\nvarying vec2 vUv;\n\nuniform sampler2D mapDiffuse;\nuniform sampler2D mapBlurScreen;\nuniform sampler2D mapRipple;\n\nuniform float vignetteRadius;\nuniform float vignetteSmoothness;\nuniform float blurAmount;\nuniform float glowIntensity;\n\nconst highp float noiseGranularity = 3.0 / 255.0;\n\nfloat vignette( vec2 uv, float radius, float smoothness ) {\n\n\tfloat diff = radius - distance(uv, vec2(0.5, 0.5));\n\treturn smoothstep(-smoothness, smoothness, diff);\n\n}\n\nvec3 dithering( vec3 color ) {\n\n  float grid_position    = rand( gl_FragCoord.xy );\n  vec3  dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n        dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n  return color + dither_shift_RGB;\n\n}\n\nvec3 rgb2hsv(vec3 c) {\n\n  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n  float d = q.x - min(q.w, q.y);\n  float e = 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nhighp float random(vec2 coords) {\n\n   return fract( sin( dot( coords.xy, vec2( 12.9898,78.233 ) ) ) * 43758.5453 );\n\n}\n\nvec3 gammaCorrect(vec3 color, float gamma){\n\n    return pow(color, vec3(1.0/gamma));\n\n}\n\nvec3 levelRange(vec3 color, float minInput, float maxInput){\n\n    return min(max(color - vec3(minInput), vec3(0.0)) / (vec3(maxInput) - vec3(minInput)), vec3(1.0));\n\n}\n\nvec3 finalLevels(vec3 color, float minInput, float gamma, float maxInput){\n\n    return gammaCorrect(levelRange(color, minInput, maxInput), gamma);\n\n}\n\nvoid main() {\n\n    vec4  ripple       = texture2D( mapRipple, vUv );\n    vec4  diffuse      = texture2D( mapDiffuse, vUv );\n    vec4  blurScreen   = texture2D( mapBlurScreen, vUv);\n    float gradientMask = smoothstep( 0.75, 1.0, 1.0 - vUv.y );\n    vec4  color        = diffuse;\n\n    vec4 blur = blurScreen;\n\n    color.rgb += ( blur.rgb * glowIntensity );\n\n    gl_FragColor = vec4( dithering( color.rgb ), 1.0 );\n\n}",uniforms:e,depthTest:!1,depthWrite:!1,precision:"highp",extensions:{derivatives:!0}})}return(0,o.Z)(a,[{key:"resize",value:function(e,n){this.uniforms.resolution.value=new v.Vector2(e,n)}}]),a}(v.ShaderMaterial);var ee=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){(0,i.Z)(this,a);var e={mapDiffuse:{value:null},resolution:{value:new v.Vector2(window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio)}};return r.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec2 resolution;\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n\t\t\tout vec2 v_rgbNW, out vec2 v_rgbNE,\n\t\t\tout vec2 v_rgbSW, out vec2 v_rgbSE,\n\t\t\tout vec2 v_rgbM) {\n\n\tvec2 inverseVP = 1.0 / resolution.xy;\n\tv_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n\tv_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n\tv_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n\tv_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n\tv_rgbM = vec2(fragCoord * inverseVP);\n\n}\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n  texcoords(vUv * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D   mapDiffuse;\nuniform vec2        resolution;\nvarying vec2        vUv;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     24.0\n\nmediump float when_gt(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nmediump float when_lt(float x, float y) {\n  return max(sign(y - x), 0.0);\n}\n\nmediump float orValue(float a, float b) {\n  return min(a + b, 1.0);\n}\n\nvoid main() {\n\n    vec2 res = vec2( 1.0 ) / resolution;\n\n    vec3 rgbNW = texture2D( mapDiffuse, v_rgbNW ).xyz;\n    vec3 rgbNE = texture2D( mapDiffuse, v_rgbNE ).xyz;\n    vec3 rgbSW = texture2D( mapDiffuse, v_rgbSW ).xyz;\n    vec3 rgbSE = texture2D( mapDiffuse, v_rgbSE ).xyz;\n    vec4 rgbaM  = texture2D( mapDiffuse,  v_rgbM );\n\n    vec3 rgbM  = rgbaM.xyz;\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * res;\n    vec4 rgbA = (1.0/2.0) * (\n    texture2D(mapDiffuse,  vUv.xy + dir * (1.0/3.0 - 0.5)) +\n    texture2D(mapDiffuse,  vUv.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n    texture2D(mapDiffuse,  vUv.xy + dir * (0.0/3.0 - 0.5)) +\n    texture2D(mapDiffuse,  vUv.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n    float conditional = orValue( when_lt( lumaB, lumaMin ), when_gt( lumaB,lumaMax ) );\n\n    gl_FragColor = mix( rgbB, rgbA, conditional);\n\n}",uniforms:e,depthTest:!1,depthWrite:!1})}return(0,o.Z)(a,[{key:"resize",value:function(e,n){this.uniforms.resolution.value=new v.Vector2(e,n)}}]),a}(v.ShaderMaterial),ne=new(t(4376).XS);ne.width=400,R.USE_GUI||ne.hide();var te=t(5108),re=function(){function e(){var n=this;(0,i.Z)(this,e),this.renderer=h.getInstance(),this.isWebGL2=!1,this.fxaaShader=new ee,this.compositionShader=new $,this.renderPass=new J({sampleCount:4,isWebGL2:this.isWebGL2}),this.fxaaPass=new Q({shader:this.fxaaShader,isWebGL2:this.isWebGL2}),this.compositionPass=new Q({shader:this.compositionShader,isWebGL2:this.isWebGL2}),this.kawaseBlurPass=new H({resolution:.25,kernels:[0,1,2,3]}),this.postParams={glowIntensity:2},this.initGui(),this.oldEnv=null,this.resize(),window.addEventListener("keydown",(function(e){e.ctrlKey&&te.log(JSON.stringify(n.postParams))})),F(k,this.resize.bind(this))}return(0,o.Z)(e,[{key:"initGui",value:function(){for(var e=ne.addFolder("post"),n=0,t=Object.entries(this.postParams);n<t.length;n++){var r=(0,V.Z)(t[n],1)[0];e.add(this.postParams,r)}}},{key:"resize",value:function(){var e=this.renderer.getPixelRatio(),n=window.innerWidth*e,t=window.innerHeight*e;this.fxaaShader.resize(n,t),this.compositionShader.resize(n,t),this.renderPass.resize(n,t),this.fxaaPass.resize(n,t),this.compositionPass.resize(n,t),this.kawaseBlurPass.resize(window.innerWidth,window.innerHeight)}},{key:"_assignGUIProperties",value:function(e){e.addFolder("Post processing settings")}},{key:"render",value:function(e,n){this.renderPass.render(this.renderer,e,n,!1),this.kawaseBlurPass.render(this.renderer,n,this.renderPass.target.texture,!1),this.renderer.DPI<2&&this.fxaaPass.render(this.renderer,n,this.renderPass.target.texture,!1);for(var t=0,r=Object.entries(this.postParams);t<r.length;t++){var i=(0,V.Z)(r[t],2),o=i[0],a=i[1];this.compositionShader.uniforms[o].value=a}this.compositionShader.uniforms.mapBlurScreen.value=this.kawaseBlurPass.target.texture,this.compositionPass.render(this.renderer,n,this.renderer.DPI<2?this.fxaaPass.target.texture:this.renderPass.target.texture,!0)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new this),e.instance}}]),e}(),ie=re,oe=function(){function e(n){var t=this,r=n.renderer;(0,i.Z)(this,e),this.renderer=r,this.camera=new v.Camera,this.camera.position.z=-1,this.mouse=new v.Vector2,this.mouseDown=!1,this.raycaster=new v.Raycaster,this.compute=this.createDoubleFBO(1024,1024),this.splatShader=new v.ShaderMaterial({vertexShader:K,fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\n\nuniform float time;\nuniform float mouseDown;\nuniform vec2 mouse;\nuniform sampler2D readTexture;\n\nvoid main() {\n\n  vec3 splat =  vec3(\n      1.0 - smoothstep( 0.08, 0.09, distance( vUv, mouse * 0.5 + 0.5 ) ),\n      0.0,\n      0.0 );\n\n    gl_FragColor.rgb =\n    texture2D( readTexture, vUv ).rgb + ( splat * mouseDown );\n\n    gl_FragColor.a = 1.0;\n\n}",uniforms:{readTexture:{value:null},time:{value:0},mouse:{value:new v.Vector2},mouseDown:{value:!1}},depthTest:!1,depthWrite:!1}),this.computeShader=new v.ShaderMaterial({vertexShader:K,fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\n\nuniform sampler2D readTexture;\nuniform sampler2D writeTexture;\n\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform float time;\n\nconst float dampen = 0.993; // Ripple dampening\nconst float power = 2.0; // Input power\nconst float speed = 10.0; // Ripple travel speed\n\n// Samples velocity from neighbor\nfloat getRipple( float height, vec2 position, float factor ){\n\n  return ( texture2D( readTexture, position ).r - height ) * factor;\n\n}\n\nvoid main() {\n\n    vec4 data = texture2D( readTexture, vUv );\n\n    float height = data.r;\n    float vel    = data.g;\n\n    vec2 kernel = ( vec2( 1.0 ) / resolution ) * speed;\n\n    vel += getRipple( height, vUv + kernel * vec2( 2.0, 3.0 ), 0.0022411859348636983 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 0.0, 3.0 ), 0.0056818181818181820 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -2.0, 3.0 ), 0.0022411859348636983 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 2.0, 2.0 ), 0.0066566640639421000 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 0.0, 2.0 ), 0.0113636363636363640 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -2.0, 2.0 ), 0.0066566640639421000 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 3.0, 1.0 ), 0.0047597860217705710 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 1.0, 1.0 ), 0.0146919683956074150 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -1.0, 1.0 ), 0.0146919683956074150 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -3.0, 1.0 ), 0.0047597860217705710 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 2.0, 0.0 ), 0.0113636363636363640 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -2.0, 0.0 ), 0.0113636363636363640 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 3.0, -1.0 ), 0.0047597860217705710 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 1.0, -1.0 ), 0.0146919683956074150 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -1.0, -1.0 ), 0.0146919683956074150 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -3.0, -1.0 ), 0.0047597860217705710 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 2.0, -2.0 ), 0.0066566640639421000 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 0.0, -2.0 ), 0.0113636363636363640 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -2.0, -2.0 ), 0.0066566640639421000 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 2.0, -3.0 ), 0.0022411859348636983 * power );\n    vel += getRipple( height, vUv + kernel * vec2( 0.0, -3.0 ), 0.0056818181818181820 * power );\n    vel += getRipple( height, vUv + kernel * vec2( -2.0, -3.0 ), 0.0022411859348636983 * power );\n\n    height += vel;\n    vel *= dampen;\n\n    height *= 0.98;\n\n    gl_FragColor.rgb = vec3( height, vel, 0.0 );\n\n    gl_FragColor.a = 1.0;\n\n}",uniforms:{readTexture:{value:null},writeTexture:{value:null},resolution:{value:new v.Vector2(1024,1024)},mouse:{value:new v.Vector2},time:{value:0}},depthTest:!1,depthWrite:!1}),this.screen=new v.Mesh(new j,this.computeShader),this.screen.frustumCulled=!1,this.gpgpuScene=new v.Scene,this.gpgpuScene.add(this.screen),F(L,(function(){t.mouseDown=!0})),F(D,(function(){t.mouseDown=!1}))}return(0,o.Z)(e,[{key:"createDoubleFBO",value:function(e,n){return{read:new v.WebGLRenderTarget(e,n,{wrapS:v.ClampToEdgeWrapping,wrapT:v.ClampToEdgeWrapping,minFilter:v.NearestFilter,magFilter:v.NearestFilter,format:v.RGBAFormat,type:v.FloatType,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!0}),write:new v.WebGLRenderTarget(e,n,{wrapS:v.ClampToEdgeWrapping,wrapT:v.ClampToEdgeWrapping,minFilter:v.NearestFilter,magFilter:v.NearestFilter,format:v.RGBAFormat,type:v.FloatType,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!0}),swap:function(){var e=this.read;this.read=this.write,this.write=e}}}},{key:"render",value:function(e){var n=e.elapsed;this.screen.material=this.splatShader,this.splatShader.uniforms.readTexture.value=this.compute.read.texture,this.splatShader.uniforms.time.value=n,this.splatShader.uniforms.mouse.value=this.mouse,this.splatShader.uniforms.mouseDown.value=this.mouseDown,this.renderer.setRenderTarget(this.compute.write),this.renderer.render(this.gpgpuScene,this.camera),this.renderer.setRenderTarget(null),this.compute.swap(),this.screen.material=this.computeShader,this.computeShader.uniforms.readTexture.value=this.compute.read.texture,this.computeShader.uniforms.writeTexture.value=this.compute.write.texture,this.renderer.setRenderTarget(this.compute.write),this.renderer.render(this.gpgpuScene,this.camera),this.renderer.setRenderTarget(null),this.compute.swap()}}]),e}(),ae=t(7326),se=t(5108);var ce=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var n,t=e.matcapTexture,o=e.normalTexture;(0,i.Z)(this,a);var s={matcap:{value:t},normalMap:{value:o},time:{value:0},colorA:{value:null},colorB:{value:null},colorC:{value:null},colorD:{value:null},colorE:{value:null},glowColor:{value:null},glowPower:{value:30},glowDistortionAmount:{value:.3},glowBrightness:{value:.1}};return(n=r.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec3 vViewPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\n\nvoid main() {\n\n  vUv = uv;\n  vPosition = position;\n  vNormal = normalize( normalMatrix * normal );\n\n  vWorldNormal = ( modelMatrix * vec4( normal, 0.0 ) ).xyz;\n  vWorldPosition = ( modelMatrix * vec4( position, 1.0 ) ).xyz;\n\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  vViewPosition = -mvPosition.xyz;\n\n  gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:'#define GLSLIFY 1\n#define PI 3.1415926\n#define TwoPI (2.0 * PI)\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_0(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_0(vec3 x) {\n  return mod289_0(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_0(i); // Avoid truncation effects in permutation\n  vec3 p = permute_0( permute_0( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_1(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1(vec4 x)\n{\n  return mod289_1(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289_1(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute_1(permute_1(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\nvarying vec3 vViewPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec3 vWorldNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\n\nuniform float time;\nuniform sampler2D matcap;\nuniform sampler2D normalMap;\nuniform vec3 colorA;\nuniform vec3 colorB;\nuniform vec3 colorC;\nuniform vec3 colorD;\nuniform vec3 colorE;\nuniform vec3 glowColor;\nuniform float glowPower;\nuniform float glowDistortionAmount;\nuniform float glowBrightness;\n\nvec2 envMapEquirect( vec3 wcNormal, float flipEnvMap, vec2 offset ) {\n  float phi = acos( -wcNormal.y ) + offset.x;\n  float theta = atan( flipEnvMap * wcNormal.x, wcNormal.z ) + PI + offset.y;\n  return vec2( theta / TwoPI, phi / PI );\n}\n\nvec2 envMapEquirect( vec3 wcNormal, vec2 offset ) {\n    return envMapEquirect( wcNormal, -1.0, offset );\n}\n\n#define NUM_OCTAVES 2\n\nfloat fbm ( in vec2 _st) {\n    float v = 0.0;\n    float a = 0.5;\n    vec2 shift = vec2(100.0);\n    // Rotate to reduce axial bias\n    mat2 rot = mat2(cos(0.5), sin(0.5),\n                    -sin(0.5), cos(0.50));\n    for (int i = 0; i < NUM_OCTAVES; ++i) {\n        v += a * snoise(_st);\n        _st = rot * _st * 2.0 + shift;\n        a *= 0.5;\n    }\n    return v;\n}\n\nvec3 hsb2rgb( in vec3 c ){\n    vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\n                             6.0)-3.0)-1.0,\n                     0.0,\n                     1.0 );\n    rgb = rgb*rgb*(3.0-2.0*rgb);\n    return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nvec3 pal( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d )\n{\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid main() {\n\n  float ripple = sin( ( vUv.x - vUv.y - ( -time * 0.05 ) ) * 20. ) * 0.2;\n\n   vec2 distortionUVs1     = vUv;\n       distortionUVs1.x  *= 0.75;\n       distortionUVs1.yx += time * 0.05;\n\n       distortionUVs1 += ripple;\n\n  vec2 distortionUVs2    = vUv;\n       distortionUVs2.x *= 0.75;\n       distortionUVs2   *= 1.0;\n       distortionUVs2.y -= time * 0.15;\n\n  vec4 normalDistortion1 = texture2D( normalMap, distortionUVs1 );\n  vec4 normalDistortion2 = texture2D( normalMap, distortionUVs2 );\n\n  vec4 distortion = mix( normalDistortion2, normalDistortion1, 0.5 ) * 2.0 - 1.0;\n\n  vec3 lightPos = vec3( -2.0, 10.0, 5.0 );\n  vec3 lightDir = normalize( lightPos - vWorldPosition );\n  vec3 eye      = normalize( vWorldPosition - cameraPosition );\n\n  // specular\n  float specularStrength = 1.0;\n  vec3  viewDir          = normalize( cameraPosition - vWorldPosition );\n  vec3  reflectDir       = reflect( -lightDir, normalize( vWorldNormal ) );\n  float spec             = pow( max( dot( viewDir, reflectDir ), 0.0 ), 32.0 );\n  vec3  specular         = specularStrength * spec * vec3( 1.0 );\n\n  vec2 st = vUv;\n  st.y *= 0.75;\n\n  float n = fbm( ( st + ( time * 0.05 ) ) * 5. );\n        n = mix( n, fbm( ( st - ( time * 0.05 ) ) * 5. ), 0.5 ) * 2.0;\n\n  float fresnelEdge = pow( clamp( 1. - dot( vWorldNormal, -eye ), 0., 1.), 3. );\n  float fresnelRef  = pow( clamp( 1. - dot( vWorldNormal, -eye ), 0., 1.), 2. );\n\n  vec2 noiseUV = vUv;\n  noiseUV *= 8.0;\n  noiseUV.y *= 0.3;\n  float curve = snoise( noiseUV + (time * 0.1) ) * 0.5 + 0.5;\n\n  vec3 colorGradient = colorA;\n  colorGradient = mix( colorGradient, colorB, smoothstep( 0.1, 0.3, curve ) );\n  colorGradient = mix( colorGradient, colorC, smoothstep( 0.35, 0.5, curve ) );\n  colorGradient = mix( colorGradient, colorD, smoothstep( 0.5, 0.75, curve ) );\n  colorGradient = mix( colorGradient, colorE, smoothstep( 0.75, 1.0, curve ) );\n\n  vec3 colors = mix( vec3( 0.0 ), colorGradient, smoothstep( 0.1, 0.6, n ) );\n       colors = mix( vec3( 0.0 ), colors, fresnelEdge );\n\n  float glow1        = pow( clamp( dot( normalize( vWorldNormal + vec3( 0.0, 0.0, 0.0 ) + ( distortion.rgb ) * glowDistortionAmount ), -eye ), 0., 1.), glowPower );\n\n  vec3  innerGlow    = (glowColor * glow1 );\n  vec2  reflectionUV = envMapEquirect( normalize( vWorldNormal + ( distortion.rgb ) * 1.0 ), vec2( -0.2, 0. ) );\n  vec3  reflection   = texture2D( matcap, reflectionUV ).rgb * 0.6;\n\n  colors += innerGlow * glowBrightness;\n\n  colors += ( ( reflection ) * fresnelRef );\n\n  gl_FragColor = vec4( colors, 1.0 );\n\n}',uniforms:s})).colorParams={colorA:15728384,colorB:16742917,colorC:53759,colorD:16717902,colorE:15663359,glowColor:10741247},n.floatParams={glowPower:50,glowDistortionAmount:.3,glowBrightness:.6},n.initGui(),window.addEventListener("keydown",(function(e){if(e.ctrlKey){se.log(JSON.stringify(n.floatParams));var t=Object.values(n.colorParams).map((function(e){return"#".concat(e.toString(16))}));se.log({colors:t})}})),F(_,n.handleUpdate.bind((0,ae.Z)(n))),n}return(0,o.Z)(a,[{key:"initGui",value:function(){for(var e=ne.addFolder("orb"),n=0,t=Object.entries(this.colorParams);n<t.length;n++){var r=(0,V.Z)(t[n],1)[0];e.addColor(this.colorParams,r)}for(var i=0,o=Object.entries(this.floatParams);i<o.length;i++){var a=(0,V.Z)(o[i],1)[0];e.add(this.floatParams,a)}}},{key:"handleUpdate",value:function(e){for(var n=e.elapsed,t=0,r=Object.entries(this.colorParams);t<r.length;t++){var i=(0,V.Z)(r[t],2),o=i[0],a=i[1];this.uniforms[o].value=new v.Color(a)}for(var s=0,c=Object.entries(this.floatParams);s<c.length;s++){var l=(0,V.Z)(c[s],2),u=l[0],h=l[1];this.uniforms[u].value=h}this.uniforms.time.value=n}}]),a}(v.ShaderMaterial),le=t(5108);var ue=function(e){(0,c.Z)(f,e);var n,t,a,h=(t=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function f(){var e;(0,i.Z)(this,f);var n=new v.SphereBufferGeometry(1,24,24);return(e=h.call(this,n)).textureLoader=new v.TextureLoader,e.loadAssets(),e}return(0,o.Z)(f,[{key:"loadAssets",value:(n=(0,r.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/static/textures/studio-hdr2.jpg",this.textureLoader);case 2:return n=e.sent,e.next=5,g("/static/textures/waves.jpg",this.textureLoader);case 5:(t=e.sent).wrapS=v.RepeatWrapping,t.wrapT=v.RepeatWrapping,this.onAssetsLoaded(n,t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onAssetsLoaded",value:function(e,n){le.log("asset loaded");var t=new ce({matcapTexture:e,normalTexture:n});this.material=t,this.material.needsUpdate=!0}}]),f}(v.Mesh);var ve=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){var e;return(0,i.Z)(this,a),(e=r.call(this)).mediator=pe.getInstance(),e.camera=e.mediator.camera,e.renderer=h.getInstance(),e.scene=d.getInstance(),e.postProcess=ie.getInstance(),e.raycaster=new v.Raycaster,e.gpgpu=new oe({renderer:e.renderer}),e.bgColor=new v.Color(0),e.orb=new ue,e.orb.position.z=0,e.scene.add(e.orb),e.mouse=new v.Vector2,e.scene.background=e.bgColor,F(E,(function(n){e.gpgpu.mouse.set(n.normalized.x,n.normalized.y)})),e.resize(),e}return(0,o.Z)(a,[{key:"resize",value:function(){var e=window.innerWidth,n=window.innerHeight;this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,n)}},{key:"earlyUpdate",value:function(e,n){(0,f.Z)((0,u.Z)(a.prototype),"earlyUpdate",this).call(this,e,n)}},{key:"update",value:function(e,n){(0,f.Z)((0,u.Z)(a.prototype),"update",this).call(this,e,n),R.USE_POSTPROCESS?this.postProcess.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)}},{key:"lateUpdate",value:function(e,n){(0,f.Z)((0,u.Z)(a.prototype),"lateUpdate",this).call(this,e,n),this.controls&&this.controls.update()}}]),a}(O);var he=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var n,t=e.fov,o=e.aspect,s=e.near,c=e.far,l=e.range,u=e.panAmount,h=e.rotateSpeed,f=e.rotationDamping,d=void 0===f?3:f;return(0,i.Z)(this,a),(n=r.call(this,t,o,s,c)).runGaze=!1,n.mouse=new v.Vector2,n.target=new v.Vector3,n.range=l,n.panAmount=u,n.rotationDamping=d,n.rotateSpeed=h,n.parentObject=null,F(E,n._handleTouchMove.bind((0,ae.Z)(n))),F(_,n.update.bind((0,ae.Z)(n))),window.addEventListener("mousemove",(function(){n.lockToCenter?n.target=new v.Vector3(0,0,-1):n.target=new v.Vector3(n.mouse.x,n.mouse.y,-1).multiply(new v.Vector3(n.range.x,n.range.y,0))})),n}return(0,o.Z)(a,[{key:"_handleTouchMove",value:function(e){var n=e.normalized;this.mouse.set(n.x,n.y)}},{key:"update",value:function(e){var n=e.delta;if(this.runGaze){var t=this.quaternion.clone(),r=new v.Vector3(0,1,-20);r.x+=this.panAmount.x*(this.target.x-r.x),r.y+=this.panAmount.y*(this.target.y-r.y),this.lookAt(r);var i=new v.Vector3;this.getWorldPosition(i);var o=this.quaternion.clone();this.quaternion.copy(o),v.Quaternion.slerp(t,o,this.quaternion,n*this.rotationDamping)}}}]),a}(v.PerspectiveCamera),fe={rotationDamping:3,panAmount:new v.Vector2(.06,.06),range:new v.Vector2(40,40),fov:50,near:.01,far:1e4,aspect:window.innerWidth/window.innerHeight};var de=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){var e;return(0,i.Z)(this,a),(e=r.call(this,fe)).position.set(0,0,5),e.runGaze=!1,m("controls")&&(e.position.set(0,0,5),e.lookAt(0,0,0),e.runGaze=!1),e}return(0,o.Z)(a,null,[{key:"getInstance",value:function(){return a.instance||(a.instance=new this),a.instance}}]),a}(he),pe=function(){function e(){(0,i.Z)(this,e),this.world=ve,this.camera=de.getInstance()}return(0,o.Z)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new this),e.instance}}]),e}(),me=t(2975),ge=t(4942),ye=t(9233),we="update_screen",xe="assets_loading",be="update_gpu_tier",Se="loading";function Re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Re(Object(t),!0).forEach((function(n){(0,ge.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ke={screen:Se,assetsLoading:!0,mute:!1,device:{gpuTier:3}},_e=new ye.X(ke),Ee=new T.xQ;Ee.subscribe((function(e){switch(e.type){case be:ke=Pe(Pe({},ke),{},{device:Pe(Pe({},ke.device),{},{gpuTier:e.payload})}),_e.next(ke);break;case we:ke=Pe(Pe({},ke),{},{screen:e.payload}),_e.next(ke);break;case xe:ke=Pe(Pe({},ke),{},{assetsLoading:e.payload}),_e.next(ke);break;case"update_mute":ke=Pe(Pe({},ke),{},{mute:e.payload}),_e.next(ke)}}));var De=[{id:"iridescent",type:"texture",url:"static/textures/iridescent.jpeg",preload:!0},{id:"doja",type:"texture",url:"static/textures/doja.jpeg",preload:!0},{id:"pillars",type:"gltf",url:"static/models/gltf/pillars.glb",preload:!0,params:{dracoCompressed:!0}},{id:"space",type:"texture",url:"/static/textures/space.jpg",preload:!0,params:{textureMinFilter:v.LinearFilter,textureMagFilter:v.LinearFilter,wrapS:v.MirroredRepeatWrapping,wrapT:v.MirroredRepeatWrapping}}],Le=t(7027),Te=(t(6564),t(725),t(5317)),Ue=t(9975);Te.ZP.registerPlugin(Ue._Z);var Ze=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Te.ZP.fromTo(e,{opacity:0},{opacity:1,duration:n,delay:t,ease:Te.Lp.easeOut,onComplete:function(){r&&r()}})};'\n                    <div class="loading-bar">\n                        <div class="loading-bar-progress"></div>\n                    </div>\n                    '.concat('<svg xmlns="http://www.w3.org/2000/svg" width="38.43" height="63.77">\n  <defs>\n  </defs>\n  <path fill="#fff" d="M13.52 7.45c-.12 1.18 2 1.7 1.9 0-.05-1.17-1.94-1.4-1.9 0M16.21 6.49s0 .25 0 .13c.14.55.35 1 1 1.12a.93.93 0 0 0 1.13-.67c.2-1.14-2-2-2.11-.58"/>\n  <path fill="#fff" d="M30.34,34.26s.32,2.65.41,6.11c.06,2,0,3.93-.07,5.67a33,33,0,0,1-.77,5.63c-1.41,5.9-2,7.51-2,7.56s-.2.78-.67-.56c0,0-1.52-3.32-2.86-6.77-.77-2-1.42-3.82-1.95-5.51A40.31,40.31,0,0,1,21.1,41a1.21,1.21,0,0,0-.05-.18,1.06,1.06,0,0,0-1-.69h0c-.81,0-1.15.85-1.28,1.18-.24.6-1.15,3.61-1.9,6.18-.61,2.08-1.65,5.76-1.86,7-.16,1-.46,2.31-.79,1.37a81.14,81.14,0,0,1-3.48-7.82A54.12,54.12,0,0,1,9,42.84a14.26,14.26,0,0,1-.6-4.16.91.91,0,0,0-.67-.92.94.94,0,0,0-1,.48s-.26.53-.62,1.09-.73.39-.82.06a26.6,26.6,0,0,1-.48-2.69,58.8,58.8,0,0,1-.46-7.29v-.05a15.06,15.06,0,0,1,.76-4.79A18.91,18.91,0,0,1,7.28,20a20.83,20.83,0,0,1,4.44-4.88,1,1,0,0,0,.17-.18l.12-.17a2.06,2.06,0,0,0,.38-.69,1.66,1.66,0,0,0-.08-1v0s-.41-1-.75-2.27a7.47,7.47,0,0,1-.42-3.38A4.46,4.46,0,0,1,14.76,4a5,5,0,0,1,1.12-.14h0a3.12,3.12,0,0,1,2.18.85,8.46,8.46,0,0,1,2,3.74.91.91,0,0,0,.49.56A17.93,17.93,0,0,1,24,11.18a22.15,22.15,0,0,1,3.14,2.89,20.38,20.38,0,0,1,2.94,4.22A30,30,0,0,1,32,23a50.06,50.06,0,0,1,1.48,5.78,25.26,25.26,0,0,1,.53,5,6.07,6.07,0,0,1-.21,1.57c-.05.49-.61,0-1.05-.6S32,33.71,32,33.71a.9.9,0,0,0-.78-.45.69.69,0,0,0-.28.05.88.88,0,0,0-.61.95m5.14-5.85a45.35,45.35,0,0,0-3.54-11.07,22.46,22.46,0,0,0-3.24-4.65,24.44,24.44,0,0,0-3.42-3.15,22.83,22.83,0,0,0-3.39-2.16,9.58,9.58,0,0,0-2.44-4.16,5.1,5.1,0,0,0-3.57-1.4,7,7,0,0,0-1.6.19,7.2,7.2,0,0,0-3.39,1.76A6,6,0,0,0,9.12,6.89a9.65,9.65,0,0,0,.45,4.39c.29,1,.61,1.93.74,2.29v0a22.84,22.84,0,0,0-4.78,5.32,20.91,20.91,0,0,0-2.4,5.14,17.33,17.33,0,0,0-.82,5.39,58.93,58.93,0,0,0,.58,8.23,20.36,20.36,0,0,0,.63,2.94,4.56,4.56,0,0,0,.46,1,1.57,1.57,0,0,0,1.33.82,2.12,2.12,0,0,0,1.4-.6,44.91,44.91,0,0,0,2.14,6.91,80.89,80.89,0,0,0,3.59,8.07c.22.41.9,1.67,2.12,1.67.55,0,1.34-.26,1.91-1.52a8.79,8.79,0,0,0,.6-2.17c.24-1.42,1.76-6.68,2.78-10a78,78,0,0,0,2.64,7.85c1.37,3.51,2.66,6.31,2.91,6.81l.06.11a7.62,7.62,0,0,0,.76,1.34,2.12,2.12,0,0,0,1.71.91,1.9,1.9,0,0,0,1.74-1.24,4.7,4.7,0,0,0,.24-.75c.12-.37.71-2.24,2-7.68a46.45,46.45,0,0,0,.9-11.86c0-.88-.06-1.78-.12-2.68a2,2,0,0,0,1,.29,1.59,1.59,0,0,0,.83-.22c1-.56,1.47-1.81,1.52-3.81a26.53,26.53,0,0,0-.57-5.46"/>\n</svg>\n',"\n                    ");var Ce=t(2982),Me=function(){function e(n){var t=n.name,r=void 0===t?"":t,o=n.additionalClasses,a=void 0===o?[]:o;if((0,i.Z)(this,e),this.name=r,this.active=!1,this.events=[],this.transitions=[],this.transitionRunning=!1,this.additionalClasses=a,(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct Abstract instances directly")}return(0,o.Z)(e,[{key:"getContainer",value:function(){var e,n=document.createElement("div");return(e=n.classList).add.apply(e,["screen",this.name.replace(/_/g,"-")].concat((0,Ce.Z)(this.additionalClasses))),n}},{key:"cleanUp",value:function(e,n){n.removeChild(e),this.events.length>0&&(this.events.forEach((function(e){return e.unsubscribe()})),this.events=[]),this.transitions.length>0&&(this.transitions.forEach((function(e){e.seek(e.vars.duration),e.kill()})),this.transitions=[])}},{key:"initListeners",value:function(){}},{key:"initTransitions",value:function(){}},{key:"onResize",value:function(){}},{key:"onEnter",value:function(){}},{key:"onExit",value:function(){}}]),e}(),Fe=t(7713),Be=t.n(Fe);var We=function(e){(0,c.Z)(h,e);var n,t,a,v=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(e){var n,t=e.name;return(0,i.Z)(this,h),(n=v.call(this,{name:t})).name=t,n.canvas=document.getElementById("experience"),n.root="",n.localState={scrollPercent:0},n.currentState={scrollProgess:0},n}return(0,o.Z)(h,[{key:"generateHTML",value:function(e){return this.container=this.getContainer(),this.container.innerHTML="\n    ",e.appendChild(this.container),this.initListeners(),this.container}},{key:"initListeners",value:function(){var e=this;this.scrollProgressBar=document.querySelector(".scroll-progress"),_e.subscribe((function(n){n.scrollProgress!==e.currentState.scrollProgress&&e._handleScrollUpdate(n.scrollProgress),e.currentState=n}))}},{key:"_handleScrollUpdate",value:function(e){var n=this;Te.ZP.to(this.localState,{scrollPercent:e,duration:.5,ease:Te.EA.easeOut,onUpdate:function(){n.scrollProgressBar.style.width="".concat(n.localState.scrollPercent||0,"%")}})}},{key:"onEnter",value:(n=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.root=n,this.generateHTML(n),t=Te.ZP.to(this.canvas,{opacity:1,duration:.25,ease:Te.bJ}),r=Ze(this.container,2,0),this.transitions.push(r,t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),h}(Me);var Ae=function(e){(0,c.Z)(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(n);if(t){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.injectPosition,o=n.screenEnter,s=n.screenExit;return(0,i.Z)(this,a),(e=r.call(this,{injectPosition:t,screenEnter:o,screenExit:s})).appState={},e}return(0,o.Z)(a,[{key:"generateHTML",value:function(e){this.container=document.createElement("div"),this.container.classList.add("rotate-device");var n="\n        ".concat(function(){return'<a class="logo '.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",'" href="https://www.phantom.land" target="_blank">\n          <img src="static/images/phntm-logo-invert.svg" alt="phantom logo" />\n      </a> ')}(),'\n        <div class="inner-container">\n            <span><img src="static/images/icon-portrait.svg" alt="Rotate device"></span>\n            <h2>Rotate your device</h2>\n            <p>Please keep your phone in portrait mode</p>\n        </div>\n        ');this.container.innerHTML+=n,e.insertAdjacentElement(this.injectPosition,this.container),this.initListeners()}},{key:"initListeners",value:function(){this.logoClick=(0,Le.R)(this.container.querySelector(".logo"),"click");var e=this.logoClick.subscribe((function(){window.gtag("event","click",{event_category:"button",event_label:"header logo"})}));this.events.push(e)}},{key:"onEnter",value:function(e){this.attached||(this.generateHTML(e),this.attached=!0)}},{key:"onExit",value:function(e){this.attached=!1,this.cleanUp(this.container,e)}}]),a}(function(){function e(n){var t=n.injectPosition,r=n.screenEnter,o=n.screenExit;if((0,i.Z)(this,e),this.screenEnter=r||null,this.screenExit=o||null,this.injectPosition=t,this.attached=!1,this.events=[],this.transitions=[],(this instanceof e?this.constructor:void 0)===Screen)throw new TypeError("Cannot construct Abstract instances directly")}return(0,o.Z)(e,[{key:"cleanUp",value:function(e,n){n.removeChild(e),this.events.length>0&&this.events.forEach((function(e){return e.unsubscribe()})),this.transitions.length>0&&this.transitions.forEach((function(e){return e.kill()}))}},{key:"initListeners",value:function(){}},{key:"onEnter",value:function(){}},{key:"onExit",value:function(){}}]),e}()),ze=function(){function e(){var n;(0,i.Z)(this,e),this.uiHTMLContainer=document.getElementById("ui"),this.uiHTMLContainer.style.display="none",n=Se,Ee.next({type:we,payload:n}),this.screens=[],this.layoutComponents=[],this.currentState={},this.localState={},(0,Le.R)(window,"click").subscribe((function(){}))}return(0,o.Z)(e,[{key:"init",value:function(){var e=this;this.initLayoutComponents(),this.initScreens(),_e.subscribe((function(n){e.handleStateUpdate(n),e.currentState=n}))}},{key:"initLayoutComponents",value:function(){var e=new Ae({screenEnter:Se,injectPosition:"afterbegin"});this.layoutComponents.push(e)}},{key:"initScreens",value:function(){var e=this;this.screens.push(new We({name:"experience"})),(0,Le.R)(window,"resize").subscribe((function(){e.screens.forEach((function(e){return e.onResize()}))}))}},{key:"handleStateUpdate",value:function(e){this.currentState.screen!==e.screen&&(this.runScreenTransitions(e),this.runLayoutTransitions(e))}},{key:"runLayoutTransitions",value:function(e){var n=this;this.layoutComponents.forEach((function(t){t.screenEnter===e.screen&&t.onEnter(n.uiHTMLContainer),t.screenExit===e.screen&&t.onExit(n.uiHTMLContainer)}))}},{key:"runScreenTransitions",value:function(e){var n=this;this.screens.forEach((function(t){var r,i=document.querySelector("".concat((r=t.name,".".concat(r.replace(/_/g,"-")))));t.name===e.screen?(t.active=!0,t.onEnter(n.uiHTMLContainer)):(t.active&&t.onExit(i,n.uiHTMLContainer),t.active=!1)}))}}]),e}(),Ge=t(6230),Ne=function(){function e(){(0,i.Z)(this,e),this.mediator=pe.getInstance(),this.renderer=h.getInstance(),this.assetManager=Be().getInstance(),this.world=null,this.loading=!1,this.assetManager.setLoaders({cubeTexture:Ge.CubeTextureLoader,texture:Ge.TextureLoader,gltf:Ge.GLTFLoader}),this._start()}return(0,o.Z)(e,[{key:"beginLoad",value:function(){var e=this;this.loading=!0,this.assetManager.setAssets(De,16),0===De.length?this._start():this.assetManager.onPreloaded.subscribe((function(){e._start()}))}},{key:"_start",value:function(){var e=this;this.world=new this.mediator.world,this.world.start(),window.addEventListener("resize",(function(){e.world.resize(window.innerWidth,window.innerHeight)})),Ee.next({type:xe,payload:false})}},{key:"init",value:function(){(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,me.M)();case 2:n=e.sent,t=n.tier,Ee.next({type:be,payload:t});case 5:case"end":return e.stop()}var t}),e)})))(),new ze(this.assetManager).init()}}]),e}()}}]);
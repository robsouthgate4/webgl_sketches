"use strict";(self.webpackChunkorb_study=self.webpackChunkorb_study||[]).push([[191],{3191:function(e,t,n){n.r(t),n.d(t,{default:function(){return De}});var i=n(5861),r=n(5671),o=n(3144),a=n(7757),s=n.n(a),c=n(9340),u=n(6215),l=n(1120),d=n(2212);var f=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){var e;return(0,r.Z)(this,a),(e=i.call(this,{canvas:document.getElementById("experience"),antialias:!1,powerPreference:"high-performance"})).DPI=Math.min(2,window.devicePixelRatio),e.setPixelRatio(e.DPI),e.setSize(window.innerWidth,window.innerHeight),e}return(0,o.Z)(a,null,[{key:"getInstance",value:function(){return a.instance||(a.instance=new this),a.instance}}]),a}(d.WebGLRenderer),v=n(1752);var h=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,r.Z)(this,a),i.call(this)}return(0,o.Z)(a,null,[{key:"getInstance",value:function(){return a.instance||(a.instance=new this),a.instance}}]),a}(d.Scene),p=n(2886),m=(n(5449),function(e){var t=window.location.search,n=new URLSearchParams(t),i=n.has(e);return n.has("debug")&&i}),g=function(e,t){return new Promise((function(n){t.load(e,(function(e){return n(e)}))}))},y=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.msMaxTouchPoints||!1},w=m("debug"),x=m("fps"),b=m("drawcount"),S=(m("gui"),m("controls")),R={USE_POSTPROCESS:!0,DEBUG_FPS:w&&x,DEBUG_DRAW_COUNT:w&&b,USE_ORBIT_CONTROLS:w&&S,USE_GUI:!0,USE_XR:"undefined"!=typeof XR},P=n(3466),E="glResizeTopic",L="glUpdateTopic",_="glTouchMoveTopic",Z=n(211),C=n(6008),k=n(5709),T=new Z.xQ,U=function(e,t){T.next({topic:e,data:t})},D=function(e,t){T.pipe((0,C.h)((function(t){return t.topic===e})),(0,k.U)((function(e){return e.data}))).subscribe(t)},M=n(840),A=n.n(M),I=function(){function e(){(0,r.Z)(this,e),this._createListeners()}return(0,o.Z)(e,[{key:"_createListeners",value:function(){var e=this;if(window.addEventListener("resize",this.onResize.bind(this)),y()){window.addEventListener("touchstart",this.onTouch.bind(this)),window.addEventListener("touchend",this.onTouchEnd.bind(this)),window.addEventListener("touchmove",this.onMouseMove.bind(this));var t=new(A().Manager)(document.body),n=new(A().Pinch),i=new(A().Press),r=new(A().Tap),o=new(A().Pan);o.set({direction:A().DIRECTION_VERTICAL,threshold:1,velocity:.1}),t.add([n,i,o,r]),t.on("tap",(function(t){var n={normalized:{x:t.center.x/e.width*2-1,y:-t.center.y/e.height*2+1},raw:{x:t.center.x,y:t.center.y},rawNormalized:{x:2*(t.center.x-.5*e.width),y:2*(t.center.y-.5*e.height)}};U("glTapTopic",n)})),t.on("pinch",(function(e){U("glPinchTopic",e)})),t.on("press",(function(e){U("glLongPressTopic",e)})),t.on("pressup",(function(e){U("glLongPressTopicUp",e)})),t.on("panmove",(function(e){U("glPanTopic",e)})),t.on("pandown panup panend",(function(e){var t=!1;"panend"===e.type&&(e.velocityY<-.3&&e.distance>10&&(t=!0,e.angle<-60&&e.angle>-120&&U("glSwipeUpTopic",e)),e.velocityY>.3&&e.distance>10&&(t=!0,e.angle>60&&e.angle<120&&U("glSwipeDownTopic",e)),t||U("glPanEndTopic",e))}))}else window.addEventListener("mousedown",this.onTouch.bind(this)),window.addEventListener("mouseup",this.onTouchEnd.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("wheel",this.onWheel.bind(this))}},{key:"removeListeners",value:function(){y()?(window.removeEventListener("touchstart",this.onPress.bind(this)),window.removeEventListener("touchend",this.onPress.bind(this)),window.removeEventListener("touchmove",this.onPressMove.bind(this))):(window.removeEventListener("mousedown",this.onPress.bind(this)),window.removeEventListener("mouseup",this.onPress.bind(this)),window.removeEventListener("mousemove",this.onPressMove.bind(this)),window.removeEventListener("wheel",this.onWheel.bind(this))),window.removeEventListener("resize",this.onResize.bind(this))}},{key:"onTouch",value:function(e){this.mouse=this.getMouse(e),U("glTouchStartTopic",this.mouse)}},{key:"onTouchEnd",value:function(e){this.mouse=this.getMouse(e),U("glTouchEndTopic",this.mouse)}},{key:"onWheel",value:function(e){U("glWheelTopic",{deltaY:e.deltaY,deltaX:e.deltaX,direction:Math.sign(e.deltaY)})}},{key:"onResize",value:function(){U(E)}},{key:"onMouseMove",value:function(e){e.touches&&e.touches.length>1||(e.preventDefault(),e.stopPropagation(),this.mouse=this.getMouse(e),U(_,this.mouse))}},{key:"getMouse",value:function(e){return e.changedTouches&&(e=e.changedTouches[0]),{normalized:{x:e.clientX/this.width*2-1,y:-e.clientY/this.height*2+1},raw:{x:e.clientX,y:e.clientY},rawNormalized:{x:2*(e.clientX-.5*this.width),y:2*(e.clientY-.5*this.height)}}}}]),e}(),B=n(5108);var W=R.DEBUG_FPS,O=R.USE_ORBIT_CONTROLS,F=R.DEBUG_DRAW_COUNT,G=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){var e;return(0,r.Z)(this,a),(e=i.call(this)).clock=new d.Clock,e.isRunning=!1,e.requestFrame=null,e.elapsed=null,e.mouse={},e.width=window.innerWidth,e.height=window.innerHeight,e.mediator=se.getInstance(),e.camera=e.mediator.camera,e.renderer=f.getInstance(),e.canvas=e.renderer.domElement,W&&(e.stats=new P,e.stats.showPanel(0),document.body.appendChild(e.stats.dom)),O&&(e.controls=null,e.initControls(),document.getElementById("ui").style.pointerEvents="none"),F&&(e.drawCallCount=0,e.renderer.info.autoReset=!1),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.start():e.pause()})),e}return(0,o.Z)(a,[{key:"start",value:function(){this.clock.start(),this.isRunning=!0,this.run()}},{key:"initControls",value:function(){this.controls=new p.z(this.camera,this.renderer.domElement),this.controls.enabled=!0,this.controls.enableDamping=!0,this.controls.dampingFactor=.08,this.controls.enablePan=!0,this.controls.update()}},{key:"pause",value:function(){this.clock.stop(),this.requestFrame&&(cancelAnimationFrame(this.requestFrame),this.requestFrame=null),this.isRunning=!1}},{key:"earlyUpdate",value:function(e,t){U("glEarlyUpdateTopic",{elapsed:e,delta:t})}},{key:"update",value:function(e,t){U(L,{elapsed:e,delta:t})}},{key:"lateUpdate",value:function(e,t){U("glLateUpdateTopic",{elapsed:e,delta:t})}},{key:"run",value:function(){var e=R.DEBUG_FPS;this.controls&&this.controls.update();var t=this.clock.getDelta();if(this.elapsed=this.clock.getElapsedTime(),e&&this.stats.begin(),this.earlyUpdate(this.elapsed,t),this.update(this.elapsed,t),this.lateUpdate(this.elapsed,t),e&&this.stats.end(),F){var n=this.renderer.info.render.calls;this.drawCallCount!=n&&B.log("Draw call count: ",n),this.drawCallCount=n,this.renderer.info.reset()}this.isRunning&&(this.requestFrame=requestAnimationFrame(this.run.bind(this)))}}]),a}(I),z=n(885);var N=function(e){(0,c.Z)(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function o(){var e;return(0,r.Z)(this,o),(e=i.call(this)).setIndex([2,1,0]),e.setAttribute("position",new d.Float32BufferAttribute([-1,-1,0,-1,4,0,4,-1,0],3)),e.needsUpdate=!0,e}return o}(d.BufferGeometry),V="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D mapDiffuse;\n\nvoid main() {\n\n    vec2 st = vUv;\n\n    vec3 diffuse = texture2D( mapDiffuse, vUv ).rgb;\n\n    gl_FragColor.rgb = diffuse;\n\n    gl_FragColor.a = 1.0;\n\n}",j="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n    \n}",H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.sampleCount,i=void 0===n?4:n,o=t.isWebGL2,a=void 0!==o&&o;(0,r.Z)(this,e),a?(this.target=new d.WebGLMultisampleRenderTarget(1,1,{format:d.RGBFormat}),this.target.samples=i):this.target=new d.WebGLRenderTarget(1,1,{minFilter:d.LinearFilter,magFilter:d.LinearFilter,stencilBuffer:!1,format:d.RGBFormat}),this.shader=new d.ShaderMaterial({vertexShader:j,fragmentShader:V,uniforms:{mapDiffuse:{value:this.target}},depthTest:!1,depthWrite:!1}),this.resolution=1,this.screen=new d.Mesh(new N,this.shader),this.screen.frustumCulled=!1,this.postScene=new d.Scene,this.postScene.autoUpdate=!1,this.postScene.add(this.screen)}return(0,o.Z)(e,[{key:"resize",value:function(e,t){this.target.setSize(e*this.resolution,t*this.resolution)}},{key:"render",value:function(e,t,n,i){e.setRenderTarget(this.target),e.render(t,n),e.setRenderTarget(null),i&&e.render(this.postScene,n)}}]),e}(),q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shader,i=t.isWebGL2,o=void 0!==i&&i,a=t.sampleCount,s=void 0===a?1:a;(0,r.Z)(this,e),o?(this.target=new d.WebGLMultisampleRenderTarget(1,1,{minFilter:d.LinearFilter,magFilter:d.LinearFilter,stencilBuffer:!1,format:d.RGBFormat}),this.target.samples=s):this.target=new d.WebGLRenderTarget(1,1,{minFilter:d.LinearFilter,magFilter:d.LinearFilter,stencilBuffer:!1,format:d.RGBFormat}),this.shader=n,this.screen=new d.Mesh(new N,this.shader),this.screen.frustumCulled=!1,this.postScene=new d.Scene,this.postScene.autoUpdate=!1,this.postScene.add(this.screen)}return(0,o.Z)(e,[{key:"render",value:function(e,t,n,i){this.shader.uniforms.mapDiffuse.value=n,i||e.setRenderTarget(this.target),e.render(this.postScene,t),e.setRenderTarget(null)}},{key:"resize",value:function(e,t){this.target.setSize(e,t)}}]),e}();var X=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){(0,r.Z)(this,a);var e={mapDiffuse:{value:null},vignetteRadius:{value:1},vignetteSmoothness:{value:.3},noiseIntensity:{value:8},radialIntensity:{value:0},radialDirection:{value:new d.Vector2(.5,.5)},radialSettings:{value:new d.Vector3(.85,5,1)},time:{value:0},resolution:{value:new d.Vector2(window.innerWidth,window.innerHeight)}};return i.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n    \n}",fragmentShader:"#define GLSLIFY 1\n#include <common>\n\nvarying vec2 vUv;\n\nuniform sampler2D mapDiffuse;\nuniform sampler2D mapBlurScreen;\nuniform sampler2D mapRipple;\n\nuniform float vignetteRadius;\nuniform float vignetteSmoothness;\nuniform float blurAmount;\nuniform float time;\nuniform float noiseIntensity;\nuniform vec2 resolution;\nuniform float radialIntensity;\nuniform vec2 radialDirection;\nuniform vec3 radialSettings;\n\nfloat vignette( vec2 uv, float radius, float smoothness ) {\n\n\tfloat diff = radius - distance(uv, vec2(0.5, 0.5));\n\treturn smoothstep(-smoothness, smoothness, diff);\n\n}\n\nvec3 dithering( vec3 color ) {\n\n  float grid_position    = rand( gl_FragCoord.xy );\n  vec3  dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n        dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n  return color + dither_shift_RGB;\n\n}\n\nvec3 rgb2hsv(vec3 c) {\n\n  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n  float d = q.x - min(q.w, q.y);\n  float e = 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nhighp float random(vec2 coords) {\n\n   return fract( sin( dot( coords.xy, vec2( 12.9898,78.233 ) ) ) * 43758.5453 );\n\n}\n\nvec3 gammaCorrect(vec3 color, float gamma){\n\n    return pow(color, vec3(1.0/gamma));\n\n}\n\nvec3 levelRange(vec3 color, float minInput, float maxInput){\n\n    return min(max(color - vec3(minInput), vec3(0.0)) / (vec3(maxInput) - vec3(minInput)), vec3(1.0));\n\n}\n\nvec3 finalLevels(vec3 color, float minInput, float gamma, float maxInput){\n\n    return gammaCorrect(levelRange(color, minInput, maxInput), gamma);\n\n}\n\nvoid main() {\n\n  float NOISE_GRANULARITY = noiseIntensity / 255.0;\n\n  int sampleCount = int(radialSettings.y);\n  float blur = radialSettings.z;\n  float falloff = radialSettings.x;\n\n  vec4  diffuse      = texture2D( mapDiffuse, vUv );\n  vec4  color        = diffuse;\n\n  vec2 destCoord = vUv;\n\n  vec2 dir = radialDirection;\n\n  vec2 direction = normalize( destCoord - dir );\n  vec2 velocity = direction * blur * pow( length( destCoord - dir ), falloff );\n  float inverseSampleCount = 1.0 / float( sampleCount );\n\n  mat3x2 increments = mat3x2( velocity * 1.0 * inverseSampleCount,\n                              velocity * 2.0 * inverseSampleCount,\n                              velocity * 4.0 * inverseSampleCount );\n\n  vec3 accumulator = vec3( 0 );\n  mat3x2 offsets = mat3x2( 0 );\n\n  for ( int i = 0; i < sampleCount; i++ ) {\n      accumulator += texture2D( mapDiffuse, destCoord + offsets[ 0 ] ).rgb;\n      offsets -= increments;\n  }\n\n  vec3 radial = accumulator / float( sampleCount );\n\n  vec3 outColor = mix( color.rgb, radial, radialIntensity );\n\n  outColor += mix(-NOISE_GRANULARITY, NOISE_GRANULARITY, random(destCoord));\n\n  outColor *= vignette( vUv, vignetteRadius, vignetteSmoothness );\n\n  gl_FragColor = vec4( outColor, 1.0 );\n\n}",uniforms:e,depthTest:!1,depthWrite:!1,precision:"lowp",extensions:{derivatives:!0}})}return(0,o.Z)(a,[{key:"resize",value:function(e,t){this.uniforms.resolution.value=new d.Vector2(e,t)}}]),a}(d.ShaderMaterial);var Y=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){(0,r.Z)(this,a);var e={mapDiffuse:{value:null},resolution:{value:new d.Vector2(window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio)}};return i.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec2 resolution;\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n\t\t\tout vec2 v_rgbNW, out vec2 v_rgbNE,\n\t\t\tout vec2 v_rgbSW, out vec2 v_rgbSE,\n\t\t\tout vec2 v_rgbM) {\n\n\tvec2 inverseVP = 1.0 / resolution.xy;\n\tv_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n\tv_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n\tv_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n\tv_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n\tv_rgbM = vec2(fragCoord * inverseVP);\n\n}\n\nvoid main() {\n\n\tvUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n  texcoords(vUv * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D   mapDiffuse;\nuniform vec2        resolution;\nvarying vec2        vUv;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     24.0\n\nmediump float when_gt(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nmediump float when_lt(float x, float y) {\n  return max(sign(y - x), 0.0);\n}\n\nmediump float orValue(float a, float b) {\n  return min(a + b, 1.0);\n}\n\nvoid main() {\n\n    vec2 res = vec2( 1.0 ) / resolution;\n\n    vec3 rgbNW = texture2D( mapDiffuse, v_rgbNW ).xyz;\n    vec3 rgbNE = texture2D( mapDiffuse, v_rgbNE ).xyz;\n    vec3 rgbSW = texture2D( mapDiffuse, v_rgbSW ).xyz;\n    vec3 rgbSE = texture2D( mapDiffuse, v_rgbSE ).xyz;\n    vec4 rgbaM  = texture2D( mapDiffuse,  v_rgbM );\n\n    vec3 rgbM  = rgbaM.xyz;\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * res;\n    vec4 rgbA = (1.0/2.0) * (\n    texture2D(mapDiffuse,  vUv.xy + dir * (1.0/3.0 - 0.5)) +\n    texture2D(mapDiffuse,  vUv.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n    texture2D(mapDiffuse,  vUv.xy + dir * (0.0/3.0 - 0.5)) +\n    texture2D(mapDiffuse,  vUv.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n    float conditional = orValue( when_lt( lumaB, lumaMin ), when_gt( lumaB,lumaMax ) );\n\n    gl_FragColor = mix( rgbB, rgbA, conditional);\n\n}",uniforms:e,depthTest:!1,depthWrite:!1})}return(0,o.Z)(a,[{key:"resize",value:function(e,t){this.uniforms.resolution.value=new d.Vector2(e,t)}}]),a}(d.ShaderMaterial),K=new(n(7637).ZP);R.USE_GUI||K.hide();var J=n(5108),Q=function(){function e(){(0,r.Z)(this,e),this.renderer=f.getInstance(),this.isWebGL2=!1,this.fxaaShader=new Y,this.compositionShader=new X,this.renderPass=new H({sampleCount:4,isWebGL2:this.isWebGL2}),this.fxaaPass=new q({shader:this.fxaaShader,isWebGL2:this.isWebGL2}),this.compositionPass=new q({shader:this.compositionShader,isWebGL2:this.isWebGL2}),this.postParams={radialIntensity:.3,radialDirection:new d.Vector2(.5,.5),radialSettings:new d.Vector3(.85,5,1),noiseIntensity:8,saveToText:function(){var e=K.save();!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"settings",n=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"txt"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var i=document.createElement("a"),r=URL.createObjectURL(n);i.href=r,i.download=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(r)}),0)}}(JSON.stringify(e.folders))},saveToLocalStorage:function(){var e=K.save();window.localStorage.setItem("etherealGui",JSON.stringify(e))},loadFromLocalStorage:function(){var e=window.localStorage.getItem("etherealGui");J.log(e),window.localStorage.getItem("etherealGui",e),K.load(JSON.parse(e))},reset:function(){K.reset()}},this.initGui(),this.oldEnv=null,this.resize(),D(E,this.resize.bind(this))}return(0,o.Z)(e,[{key:"initGui",value:function(){var e=K.addFolder("post");K.add(this.postParams,"saveToText"),K.add(this.postParams,"saveToLocalStorage"),K.add(this.postParams,"loadFromLocalStorage"),K.add(this.postParams,"reset"),e.add(this.postParams,"radialIntensity",0,2),e.add(this.postParams.radialDirection,"x",0,1).name("radial direction x"),e.add(this.postParams.radialDirection,"y",0,1).name("radial direction y"),e.add(this.postParams.radialSettings,"x",0,1).name("radial falloff"),e.add(this.postParams.radialSettings,"y",0,15).name("radial steps"),e.add(this.postParams.radialSettings,"z",0,3).name("radial blur"),e.add(this.postParams,"noiseIntensity",0,50).name("noise intensity")}},{key:"resize",value:function(){var e=this.renderer.getPixelRatio(),t=window.innerWidth*e,n=window.innerHeight*e;this.fxaaShader.resize(t,n),this.compositionShader.resize(t,n),this.renderPass.resize(t,n),this.fxaaPass.resize(t,n),this.compositionPass.resize(t,n)}},{key:"_assignGUIProperties",value:function(e){e.addFolder("Post processing settings")}},{key:"render",value:function(e,t,n){this.renderPass.render(this.renderer,e,t,!1),this.renderer.DPI<2&&this.fxaaPass.render(this.renderer,t,this.renderPass.target.texture,!1);for(var i=0,r=Object.entries(this.postParams);i<r.length;i++){var o=(0,z.Z)(r[i],2),a=o[0],s=o[1];"saveToText"!==a&&"saveToLocalStorage"!==a&&"loadFromLocalStorage"!==a&&"reset"!==a&&(this.compositionShader.uniforms[a].value=s)}this.compositionShader.uniforms.time.value=n,this.compositionPass.render(this.renderer,t,this.renderer.DPI<2?this.fxaaPass.target.texture:this.renderPass.target.texture,!0)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new this),e.instance}}]),e}(),$=Q,ee=n(7326);var te=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(e){var t,n=e.noiseTexture;(0,r.Z)(this,a);var o={one:{edge:0,scale:.2,color:new d.Color("rgb(152, 153, 50)"),distortionAmount:2,position:new d.Vector2(.35,.5)},two:{edge:0,scale:.25,color:new d.Color("rgb( 172, 65, 123 )"),distortionAmount:2,position:new d.Vector2(.5,.4)},three:{edge:0,scale:.2,color:new d.Color("rgb( 255, 0, 0 )"),distortionAmount:2,position:new d.Vector2(.5,.5)},four:{edge:0,scale:.4,color:new d.Color("rgb( 169, 115, 255 )"),distortionAmount:2,position:new d.Vector2(.6,.5)},five:{edge:-.08,scale:.2,color:new d.Color("rgb( 255, 255, 255 )"),distortionAmount:2,position:new d.Vector2(.5,.5)}},s=Object.values(o),c={matcap:{value:null},time:{value:null},lights:{value:s},backgroundColor:{value:new d.Color(0)},scaleFactor:{value:1},distortionSettings:{value:new d.Vector3(0,0)},noiseTexture:{value:n},brightness:{value:1.5},spiralSettings:{value:new d.Vector2(0,0)},resolution:{value:new d.Vector2(window.innerWidth,window.innerHeight)}};return(t=i.call(this,{vertexShader:"#define GLSLIFY 1\nvarying vec3 vViewPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\n\nvoid main() {\n\n  vUv = vec2( 0.5 ) + ( position.xy ) * 0.5;\n\n\tgl_Position = vec4( position.xy, 0.0,  1.0 );\n\n}",fragmentShader:"precision lowp float;\n#define GLSLIFY 1\n\nuniform float time;\nuniform float lightDistortionAmount;\nuniform vec3 distortionSettings;\nuniform vec2 spiralSettings;\nuniform float brightness;\nuniform float scaleFactor;\nuniform vec2 resolution;\nuniform vec3 backgroundColor;\nvarying vec2 vUv;\nuniform sampler2D noiseTexture;\n\nfloat random(vec2 coords) {\n   return fract(sin(dot(coords.xy, vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat sdfCircle(vec2 uv, vec2 offset, float distortionAmount )\n{\n  float x = uv.x - offset.x;\n  float y = uv.y - offset.y;\n  float a = length(vec2(x, y));\n\n  float d2 = texture2D( noiseTexture, (uv + ( time * distortionSettings.z )) * distortionSettings.x ).r * distortionSettings.y;\n\n  return a + d2;\n}\n\nfloat sdfCircleB(vec2 uv, vec2 offset, float r )\n{\n  float x = uv.x - offset.x;\n  float y = uv.y - offset.y;\n  float a = length(vec2(x, y)) - r;\n  return a;\n}\n\nvec3 rgb( vec3 col )\n{\n  return col / 255.;\n}\n\nvec3 drawBackground()\n{\n  return backgroundColor;\n}\n\nstruct Light {\n    float edge;\n    float scale;\n    vec3 color;\n    float distortionAmount;\n    vec2 position;\n};\n\nuniform Light lights[ LIGHT_COUNT ];\n\nvec4 drawScene( vec2 uv, vec2 mouse )\n{\n\n  vec2 scaledUV = uv;\n\n  scaledUV -= 0.5;\n  scaledUV *= scaleFactor;\n  scaledUV += 0.5;\n\n  vec2 originalUV = scaledUV;\n\n  vec4 col = vec4( drawBackground(), 1.0 );\n\n  vec2 c = vec2( 0.6 );\n\n for( int i = 0; i < LIGHT_COUNT; i++ )\n  {\n      Light l = lights[i];\n      float getLight = sdfCircle( scaledUV, l.position, l.distortionAmount );\n      col = vec4( mix( l.color, col.rgb, smoothstep(l.edge, l.scale, getLight ) ), 1.0 );\n\n  }\n\n  return col;\n}\n\nvoid spiralUV( in vec2 coord, out vec2 outCoord )\n{\n\n  vec2 tc = coord;\n\n  vec2 center  = vec2( 0.5 );\n       tc     -= center;\n\n  float radius = spiralSettings.x;\n  float angle  = spiralSettings.y;\n  float dist   = length( tc );\n\n  if ( dist < radius )\n  {\n\n    float percent = ( radius - dist) / radius;\n    float theta   = percent * percent * angle * 8.0;\n    float s       = sin( theta );\n    float c       = cos( theta );\n          tc      = vec2( dot( tc, vec2( c, -s ) ), dot( tc, vec2( s, c ) ) );\n\n  }\n\n  tc += center;\n  outCoord = tc;\n\n}\n\nvoid main()\n{\n\n  vec2 uv = vUv;\n  uv -= 0.5;\n  uv.x *= resolution.x / resolution.y;\n  uv += 0.5;\n\n  vec2 mouse = vec2( 0.0 );\n\n  vec2 st;\n  spiralUV( uv, st );\n\n  vec4 col = drawScene( st, mouse );\n\n  col.rgb *= brightness;\n\n  gl_FragColor = vec4( col.rgb, col.a );\n\n}",uniforms:c,transparent:!0,defines:{LIGHT_COUNT:s.length}})).params={backgroundColor:new d.Color(0),distortionSettings:new d.Vector3(0,0),scaleFactor:1,brightness:1.5,spiralSettings:new d.Vector2(0,0)},t.initGui(o),D(L,t.handleUpdate.bind((0,ee.Z)(t))),t}return(0,o.Z)(a,[{key:"initGui",value:function(e){var t=K.addFolder("lights");t.addColor(this.params,"backgroundColor").name("background color"),t.add(this.params.distortionSettings,"x",0,2,.01).name("distortion scale"),t.add(this.params.distortionSettings,"y",0,.5,.01).name("distortion amount"),t.add(this.params.distortionSettings,"z",0,1,.01).name("distortion speed"),t.add(this.params,"scaleFactor",0,5).name("scale factor"),t.add(this.params.spiralSettings,"x",0,1,.01).name("spiral radius"),t.add(this.params.spiralSettings,"y",0,10,.01).name("spiral amount");for(var n=0,i=Object.entries(e);n<i.length;n++){var r=(0,z.Z)(i[n],2),o=r[0],a=r[1],s=t.addFolder(o);s.add(a,"edge",-1,1),s.add(a,"scale",0,1),s.add(a.position,"x",0,1),s.add(a.position,"y",0,1),s.addColor(a,"color")}}},{key:"handleUpdate",value:function(e){for(var t=e.elapsed,n=0,i=Object.entries(this.params);n<i.length;n++){var r=(0,z.Z)(i[n],2),o=r[0],a=r[1];this.uniforms[o].value=a}this.uniforms.time.value=t}}]),a}(d.ShaderMaterial);var ne=function(e){(0,c.Z)(v,e);var t,n,a,f=(n=v,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(n);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function v(){var e;(0,r.Z)(this,v);var t=new N;return(e=f.call(this,t)).textureLoader=new d.TextureLoader,e.frustumCulled=!1,e.loadAssets(),e}return(0,o.Z)(v,[{key:"loadAssets",value:(t=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("static/textures/simplex-noise.jpg",this.textureLoader);case 2:(t=e.sent).wrapT=d.RepeatWrapping,t.wrapS=d.RepeatWrapping,this.onAssetsLoaded(t),D(E,this.handleResize.bind(this));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleResize",value:function(){this.material.uniforms.resolution.value.set(window.innerWidth,window.innerHeight)}},{key:"onAssetsLoaded",value:function(e){this.material=new te({noiseTexture:e}),this.material.needsUpdate=!0}}]),v}(d.Mesh);var ie=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){var e;return(0,r.Z)(this,a),(e=i.call(this)).mediator=se.getInstance(),e.camera=e.mediator.camera,e.renderer=f.getInstance(),e.scene=h.getInstance(),e.postProcess=$.getInstance(),e.ethereal=new ne,e.scene.add(e.ethereal),e.raycaster=new d.Raycaster,e.bgColor=new d.Color(16777215),e.mouse=new d.Vector2,e.scene.background=e.bgColor,e.resize(),e}return(0,o.Z)(a,[{key:"resize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"earlyUpdate",value:function(e,t){(0,v.Z)((0,l.Z)(a.prototype),"earlyUpdate",this).call(this,e,t)}},{key:"update",value:function(e,t){(0,v.Z)((0,l.Z)(a.prototype),"update",this).call(this,e,t),R.USE_POSTPROCESS?this.postProcess.render(this.scene,this.camera,e):this.renderer.render(this.scene,this.camera)}},{key:"lateUpdate",value:function(e,t){(0,v.Z)((0,l.Z)(a.prototype),"lateUpdate",this).call(this,e,t),this.controls&&this.controls.update()}}]),a}(G);var re=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(e){var t,n=e.fov,o=e.aspect,s=e.near,c=e.far,u=e.range,l=e.panAmount,f=e.rotateSpeed,v=e.rotationDamping,h=void 0===v?3:v;return(0,r.Z)(this,a),(t=i.call(this,n,o,s,c)).runGaze=!1,t.mouse=new d.Vector2,t.target=new d.Vector3,t.range=u,t.panAmount=l,t.rotationDamping=h,t.rotateSpeed=f,t.parentObject=null,D(_,t._handleTouchMove.bind((0,ee.Z)(t))),D(L,t.update.bind((0,ee.Z)(t))),window.addEventListener("mousemove",(function(){t.lockToCenter?t.target=new d.Vector3(0,0,-1):t.target=new d.Vector3(t.mouse.x,t.mouse.y,-1).multiply(new d.Vector3(t.range.x,t.range.y,0))})),t}return(0,o.Z)(a,[{key:"_handleTouchMove",value:function(e){var t=e.normalized;this.mouse.set(t.x,t.y)}},{key:"update",value:function(e){var t=e.delta;if(this.runGaze){var n=this.quaternion.clone(),i=new d.Vector3(0,1,-20);i.x+=this.panAmount.x*(this.target.x-i.x),i.y+=this.panAmount.y*(this.target.y-i.y),this.lookAt(i);var r=new d.Vector3;this.getWorldPosition(r);var o=this.quaternion.clone();this.quaternion.copy(o),d.Quaternion.slerp(n,o,this.quaternion,t*this.rotationDamping)}}}]),a}(d.PerspectiveCamera),oe={rotationDamping:3,panAmount:new d.Vector2(.06,.06),range:new d.Vector2(40,40),fov:50,near:.01,far:1e4,aspect:window.innerWidth/window.innerHeight};var ae=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){var e;return(0,r.Z)(this,a),(e=i.call(this,oe)).position.set(0,0,1),e.runGaze=!1,m("controls")&&(e.position.set(0,0,5),e.lookAt(0,0,0),e.runGaze=!1),e}return(0,o.Z)(a,null,[{key:"getInstance",value:function(){return a.instance||(a.instance=new this),a.instance}}]),a}(re),se=function(){function e(){(0,r.Z)(this,e),this.world=ie,this.camera=ae.getInstance()}return(0,o.Z)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new this),e.instance}}]),e}(),ce=n(2975),ue=n(4942),le=n(9233),de="update_screen",fe="assets_loading",ve="update_gpu_tier",he="loading";function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,ue.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge={screen:he,assetsLoading:!0,mute:!1,device:{gpuTier:3}},ye=new le.X(ge),we=new Z.xQ;we.subscribe((function(e){switch(e.type){case ve:ge=me(me({},ge),{},{device:me(me({},ge.device),{},{gpuTier:e.payload})}),ye.next(ge);break;case de:ge=me(me({},ge),{},{screen:e.payload}),ye.next(ge);break;case fe:ge=me(me({},ge),{},{assetsLoading:e.payload}),ye.next(ge);break;case"update_mute":ge=me(me({},ge),{},{mute:e.payload}),ye.next(ge)}}));var xe=[],be=n(7027),Se=(n(6564),n(725),n(5317)),Re=n(9975);Se.ZP.registerPlugin(Re._Z);var Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Se.ZP.fromTo(e,{opacity:0},{opacity:1,duration:t,delay:n,ease:Se.Lp.easeOut,onComplete:function(){i&&i()}})};'\n                    <div class="loading-bar">\n                        <div class="loading-bar-progress"></div>\n                    </div>\n                    '.concat('<svg xmlns="http://www.w3.org/2000/svg" width="38.43" height="63.77">\n  <defs>\n  </defs>\n  <path fill="#fff" d="M13.52 7.45c-.12 1.18 2 1.7 1.9 0-.05-1.17-1.94-1.4-1.9 0M16.21 6.49s0 .25 0 .13c.14.55.35 1 1 1.12a.93.93 0 0 0 1.13-.67c.2-1.14-2-2-2.11-.58"/>\n  <path fill="#fff" d="M30.34,34.26s.32,2.65.41,6.11c.06,2,0,3.93-.07,5.67a33,33,0,0,1-.77,5.63c-1.41,5.9-2,7.51-2,7.56s-.2.78-.67-.56c0,0-1.52-3.32-2.86-6.77-.77-2-1.42-3.82-1.95-5.51A40.31,40.31,0,0,1,21.1,41a1.21,1.21,0,0,0-.05-.18,1.06,1.06,0,0,0-1-.69h0c-.81,0-1.15.85-1.28,1.18-.24.6-1.15,3.61-1.9,6.18-.61,2.08-1.65,5.76-1.86,7-.16,1-.46,2.31-.79,1.37a81.14,81.14,0,0,1-3.48-7.82A54.12,54.12,0,0,1,9,42.84a14.26,14.26,0,0,1-.6-4.16.91.91,0,0,0-.67-.92.94.94,0,0,0-1,.48s-.26.53-.62,1.09-.73.39-.82.06a26.6,26.6,0,0,1-.48-2.69,58.8,58.8,0,0,1-.46-7.29v-.05a15.06,15.06,0,0,1,.76-4.79A18.91,18.91,0,0,1,7.28,20a20.83,20.83,0,0,1,4.44-4.88,1,1,0,0,0,.17-.18l.12-.17a2.06,2.06,0,0,0,.38-.69,1.66,1.66,0,0,0-.08-1v0s-.41-1-.75-2.27a7.47,7.47,0,0,1-.42-3.38A4.46,4.46,0,0,1,14.76,4a5,5,0,0,1,1.12-.14h0a3.12,3.12,0,0,1,2.18.85,8.46,8.46,0,0,1,2,3.74.91.91,0,0,0,.49.56A17.93,17.93,0,0,1,24,11.18a22.15,22.15,0,0,1,3.14,2.89,20.38,20.38,0,0,1,2.94,4.22A30,30,0,0,1,32,23a50.06,50.06,0,0,1,1.48,5.78,25.26,25.26,0,0,1,.53,5,6.07,6.07,0,0,1-.21,1.57c-.05.49-.61,0-1.05-.6S32,33.71,32,33.71a.9.9,0,0,0-.78-.45.69.69,0,0,0-.28.05.88.88,0,0,0-.61.95m5.14-5.85a45.35,45.35,0,0,0-3.54-11.07,22.46,22.46,0,0,0-3.24-4.65,24.44,24.44,0,0,0-3.42-3.15,22.83,22.83,0,0,0-3.39-2.16,9.58,9.58,0,0,0-2.44-4.16,5.1,5.1,0,0,0-3.57-1.4,7,7,0,0,0-1.6.19,7.2,7.2,0,0,0-3.39,1.76A6,6,0,0,0,9.12,6.89a9.65,9.65,0,0,0,.45,4.39c.29,1,.61,1.93.74,2.29v0a22.84,22.84,0,0,0-4.78,5.32,20.91,20.91,0,0,0-2.4,5.14,17.33,17.33,0,0,0-.82,5.39,58.93,58.93,0,0,0,.58,8.23,20.36,20.36,0,0,0,.63,2.94,4.56,4.56,0,0,0,.46,1,1.57,1.57,0,0,0,1.33.82,2.12,2.12,0,0,0,1.4-.6,44.91,44.91,0,0,0,2.14,6.91,80.89,80.89,0,0,0,3.59,8.07c.22.41.9,1.67,2.12,1.67.55,0,1.34-.26,1.91-1.52a8.79,8.79,0,0,0,.6-2.17c.24-1.42,1.76-6.68,2.78-10a78,78,0,0,0,2.64,7.85c1.37,3.51,2.66,6.31,2.91,6.81l.06.11a7.62,7.62,0,0,0,.76,1.34,2.12,2.12,0,0,0,1.71.91,1.9,1.9,0,0,0,1.74-1.24,4.7,4.7,0,0,0,.24-.75c.12-.37.71-2.24,2-7.68a46.45,46.45,0,0,0,.9-11.86c0-.88-.06-1.78-.12-2.68a2,2,0,0,0,1,.29,1.59,1.59,0,0,0,.83-.22c1-.56,1.47-1.81,1.52-3.81a26.53,26.53,0,0,0-.57-5.46"/>\n</svg>\n',"\n                    ");var Ee=n(2982),Le=function(){function e(t){var n=t.name,i=void 0===n?"":n,o=t.additionalClasses,a=void 0===o?[]:o;if((0,r.Z)(this,e),this.name=i,this.active=!1,this.events=[],this.transitions=[],this.transitionRunning=!1,this.additionalClasses=a,(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct Abstract instances directly")}return(0,o.Z)(e,[{key:"getContainer",value:function(){var e,t=document.createElement("div");return(e=t.classList).add.apply(e,["screen",this.name.replace(/_/g,"-")].concat((0,Ee.Z)(this.additionalClasses))),t}},{key:"cleanUp",value:function(e,t){t.removeChild(e),this.events.length>0&&(this.events.forEach((function(e){return e.unsubscribe()})),this.events=[]),this.transitions.length>0&&(this.transitions.forEach((function(e){e.seek(e.vars.duration),e.kill()})),this.transitions=[])}},{key:"initListeners",value:function(){}},{key:"initTransitions",value:function(){}},{key:"onResize",value:function(){}},{key:"onEnter",value:function(){}},{key:"onExit",value:function(){}}]),e}(),_e=n(7713),Ze=n.n(_e);var Ce=function(e){(0,c.Z)(f,e);var t,n,a,d=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(n);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function f(e){var t,n=e.name;return(0,r.Z)(this,f),(t=d.call(this,{name:n})).name=n,t.canvas=document.getElementById("experience"),t.root="",t.localState={scrollPercent:0},t.currentState={scrollProgess:0},t}return(0,o.Z)(f,[{key:"generateHTML",value:function(e){return this.container=this.getContainer(),this.container.innerHTML="\n    ",e.appendChild(this.container),this.initListeners(),this.container}},{key:"initListeners",value:function(){var e=this;this.scrollProgressBar=document.querySelector(".scroll-progress"),ye.subscribe((function(t){t.scrollProgress!==e.currentState.scrollProgress&&e._handleScrollUpdate(t.scrollProgress),e.currentState=t}))}},{key:"_handleScrollUpdate",value:function(e){var t=this;Se.ZP.to(this.localState,{scrollPercent:e,duration:.5,ease:Se.EA.easeOut,onUpdate:function(){t.scrollProgressBar.style.width="".concat(t.localState.scrollPercent||0,"%")}})}},{key:"onEnter",value:(t=(0,i.Z)(s().mark((function e(t){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.root=t,this.generateHTML(t),n=Se.ZP.to(this.canvas,{opacity:1,duration:.25,ease:Se.bJ}),i=Pe(this.container,2,0),this.transitions.push(i,n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),f}(Le);var ke=function(e){(0,c.Z)(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.injectPosition,o=t.screenEnter,s=t.screenExit;return(0,r.Z)(this,a),(e=i.call(this,{injectPosition:n,screenEnter:o,screenExit:s})).appState={},e}return(0,o.Z)(a,[{key:"generateHTML",value:function(e){this.container=document.createElement("div"),this.container.classList.add("rotate-device");var t="\n        ".concat(function(){return'<a class="logo '.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",'" href="https://www.phantom.land" target="_blank">\n          <img src="static/images/phntm-logo-invert.svg" alt="phantom logo" />\n      </a> ')}(),'\n        <div class="inner-container">\n            <span><img src="static/images/icon-portrait.svg" alt="Rotate device"></span>\n            <h2>Rotate your device</h2>\n            <p>Please keep your phone in portrait mode</p>\n        </div>\n        ');this.container.innerHTML+=t,e.insertAdjacentElement(this.injectPosition,this.container),this.initListeners()}},{key:"initListeners",value:function(){this.logoClick=(0,be.R)(this.container.querySelector(".logo"),"click");var e=this.logoClick.subscribe((function(){window.gtag("event","click",{event_category:"button",event_label:"header logo"})}));this.events.push(e)}},{key:"onEnter",value:function(e){this.attached||(this.generateHTML(e),this.attached=!0)}},{key:"onExit",value:function(e){this.attached=!1,this.cleanUp(this.container,e)}}]),a}(function(){function e(t){var n=t.injectPosition,i=t.screenEnter,o=t.screenExit;if((0,r.Z)(this,e),this.screenEnter=i||null,this.screenExit=o||null,this.injectPosition=n,this.attached=!1,this.events=[],this.transitions=[],(this instanceof e?this.constructor:void 0)===Screen)throw new TypeError("Cannot construct Abstract instances directly")}return(0,o.Z)(e,[{key:"cleanUp",value:function(e,t){t.removeChild(e),this.events.length>0&&this.events.forEach((function(e){return e.unsubscribe()})),this.transitions.length>0&&this.transitions.forEach((function(e){return e.kill()}))}},{key:"initListeners",value:function(){}},{key:"onEnter",value:function(){}},{key:"onExit",value:function(){}}]),e}()),Te=function(){function e(){var t;(0,r.Z)(this,e),this.uiHTMLContainer=document.getElementById("ui"),this.uiHTMLContainer.style.display="none",t=he,we.next({type:de,payload:t}),this.screens=[],this.layoutComponents=[],this.currentState={},this.localState={},(0,be.R)(window,"click").subscribe((function(){}))}return(0,o.Z)(e,[{key:"init",value:function(){var e=this;this.initLayoutComponents(),this.initScreens(),ye.subscribe((function(t){e.handleStateUpdate(t),e.currentState=t}))}},{key:"initLayoutComponents",value:function(){var e=new ke({screenEnter:he,injectPosition:"afterbegin"});this.layoutComponents.push(e)}},{key:"initScreens",value:function(){var e=this;this.screens.push(new Ce({name:"experience"})),(0,be.R)(window,"resize").subscribe((function(){e.screens.forEach((function(e){return e.onResize()}))}))}},{key:"handleStateUpdate",value:function(e){this.currentState.screen!==e.screen&&(this.runScreenTransitions(e),this.runLayoutTransitions(e))}},{key:"runLayoutTransitions",value:function(e){var t=this;this.layoutComponents.forEach((function(n){n.screenEnter===e.screen&&n.onEnter(t.uiHTMLContainer),n.screenExit===e.screen&&n.onExit(t.uiHTMLContainer)}))}},{key:"runScreenTransitions",value:function(e){var t=this;this.screens.forEach((function(n){var i,r=document.querySelector("".concat((i=n.name,".".concat(i.replace(/_/g,"-")))));n.name===e.screen?(n.active=!0,n.onEnter(t.uiHTMLContainer)):(n.active&&n.onExit(r,t.uiHTMLContainer),n.active=!1)}))}}]),e}(),Ue=n(6230),De=function(){function e(){(0,r.Z)(this,e),this.mediator=se.getInstance(),this.renderer=f.getInstance(),this.assetManager=Ze().getInstance(),this.world=null,this.loading=!1,this.assetManager.setLoaders({cubeTexture:Ue.CubeTextureLoader,texture:Ue.TextureLoader,gltf:Ue.GLTFLoader}),this._start()}return(0,o.Z)(e,[{key:"beginLoad",value:function(){var e=this;this.loading=!0,this.assetManager.setAssets(xe,16),0===xe.length?this._start():this.assetManager.onPreloaded.subscribe((function(){e._start()}))}},{key:"_start",value:function(){var e=this;this.world=new this.mediator.world,this.world.start(),window.addEventListener("resize",(function(){e.world.resize(window.innerWidth,window.innerHeight)})),we.next({type:fe,payload:false})}},{key:"init",value:function(){(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ce.M)();case 2:t=e.sent,n=t.tier,we.next({type:ve,payload:n});case 5:case"end":return e.stop()}var n}),e)})))(),new Te(this.assetManager).init()}}]),e}()}}]);